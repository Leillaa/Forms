{% extends 'base.html' %}
{% load static %}

{% block title %}Опрос{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 40px auto;">
    <div style="background: #f8f9fa; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 32px 28px 24px 28px;">
        <h2 style="margin-bottom: 10px; font-size: 1.5em; color: #222;">{{ questionnaire }}</h2>
    <h3 style="margin-bottom: 24px; font-size: 1.1em; color: #444;">{{ point.name }}</h3>
        <form method="post">
            {% csrf_token %}
            <div style="display: flex; flex-direction: column; gap: 24px;">
                <div style="border: 1px solid #bcd; border-radius: 8px; background: #fff; padding: 18px 16px 24px 16px; margin-bottom: 0; display: flex; flex-direction: column; align-items: stretch;">
                    <!-- Вопрос — это point.name, уже выше -->
                    {% if q_type == 'radio' %}
                        {% if variants %}
                            {% for variant in variants %}
                                <label style="margin-bottom: 6px;">
                                    <input type="radio" name="answer" value="{{ variant.id }}" required>
                                    {{ variant.name }}
                                </label><br>
                            {% endfor %}
                        {% else %}
                            <span style="color: #888;">Нет вариантов ответа</span>
                        {% endif %}
                    {% elif q_type == 'check_box' %}
                        {% if variants %}
                            {% for variant in variants %}
                                <label style="margin-bottom: 6px;">
                                    <input type="checkbox" name="answer" value="{{ variant.id }}">
                                    {{ variant.name }}
                                </label><br>
                            {% endfor %}
                        {% else %}
                            <span style="color: #888;">Нет вариантов ответа</span>
                        {% endif %}
                    {% elif q_type == 'text' or q_type == 'text_or_non' %}
                        <input type="text" name="answer" class="form-control" {% if q_type == 'text' %}required{% endif %}>
                    {% elif q_type == 'raiting' %}
                        <input type="number" name="answer" min="1" max="5" required>
                    {% endif %}
                </div>
            </div>
            {% if error %}
                <div style="color: red; margin: 10px 0;">{{ error }}</div>
            {% endif %}
            <div style="text-align: right; margin-top: 28px;">
                <button type="submit" style="background: #1976d2; color: #fff; border: none; border-radius: 6px; padding: 10px 28px; font-size: 1.1em; font-weight: 500; cursor: pointer; transition: background 0.2s;">Дальше</button>
            </div>
            <div style="margin-top: 10px; color: #888; font-size: 0.95em;">Вопрос {{ question_number }} из {{ total_questions }}</div>
        </form>
    </div>
</div>
{% endblock %}